<!doctype html>
<!--
  Copyright The WildFly Authors
   SPDX-License-Identifier: Apache-2.0
-->
<html>
    <head>
        <title>Streaming Example</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="resources/css/hello.css" />
    </head>
    <body><h1>Welcome to WildFly AI SSE page!</h1>
        <div>This is a simple example of calls to a langChain4J StreamingChatLanguageModel</div>
        <div>What is the best sci-fi movie? using a ChatLanguageModel
        </div>
        <div id="data">
            Hello
        </div>
        <script>
            var source = new EventSource('rest/sse/chat?question=What%20is%20the%20best%20sci-fi%20movie');
//            source.onopen = function (event) {
//                console.log(event);
//            };

            source.addEventListener("token", function (event) {
                console.log("EventListener " + event.lastEventId  + " " + event.data);
                append(event);
            }, false);
////
//            source.onmessage = function (event) {
//                console.log("On message " + event);
//                append(event);
//            };
//
//            source.onerror = function (event) {
//                console.log(event);
//                source.close();
//            };

            function append(event) {
                document.getElementById("data").innerHTML += event.data + "<br>";
            }
            ;
        </script>
    </body>
</html>


